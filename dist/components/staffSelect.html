<template id="staffSelect">
    <div class="staff-select-wrap">
        <select v-selectstaff multiple="multiple" v-if="multiple == 'true'" :id="id" :disabled="idDisabled">
            <option v-for="staff in staffs" :data-img="staff.img" :value="staff.id">{{staff.value}}</option>
            <!--<option data-img="img/head-list.png" data-manage="true">艾云鹤1</option>-->
            <!--<option data-img="img/head-list.png" data-manage="false">艾云鹤21</option>-->
            <!--<option data-img="img/head-list.png" data-manage="false">艾云鹤31</option>-->
            <!--<option data-img="img/head-list.png" data-manage="false">艾云鹤41</option>-->
            <!--<option data-img="img/head-list.png" data-manage="false">艾云鹤51</option>-->
            <!--<option data-img="img/head-list.png" data-manage="false">艾云鹤61</option>-->
        </select>
        <select v-selectstaff v-else :id="id" :disabled="idDisabled">
            <option v-for="staff in staffs" :data-img="staff.img" :value="staff.id">{{staff.value}}</option>
            <!--<option data-img="img/head-list.png" data-manage="true">艾云鹤1</option>-->
            <!--<option data-img="img/head-list.png" data-manage="false">艾云鹤21</option>-->
            <!--<option data-img="img/head-list.png" data-manage="false">艾云鹤31</option>-->
            <!--<option data-img="img/head-list.png" data-manage="false">艾云鹤41</option>-->
            <!--<option data-img="img/head-list.png" data-manage="false">艾云鹤51</option>-->
            <!--<option data-img="img/head-list.png" data-manage="false">艾云鹤61</option>-->
        </select>
    </div>
</template>
<script>

    var staffSelect = Vue.extend({
        template: '#staffSelect',
        props: ["multiple", 'id', 'disabled'],
        data: function () {
            return {
                staffs: [],
                idDisabled: false
            }
        },
        methods: {
            changeDisabled: function (disabled) {
                this.$data.idDisabled = disabled;
            }
        },
        created: function () {
            var url = "json/staffList.json";
            // this.$http.get(url).then(function (data) {
            //     var json = JSON.parse(data.bodyText);
            //     console.log(json);
            //     this.$data.staffs = json;
            // }, function (response) {
            //     console.info(response);
            // });
            var _self = this;
            // $.get(url, function (data) {
            //     console.log(data);
            //     // var json = JSON.parse(data.bodyText);
            //     // console.log(json);
            //     _self.$data.staffs = data;
            // });
            var data = [
                {
                    "id": "1",
                    "value": "艾云鹤",
                    "manage": true,
                    "img": "img/head-list.png"
                },
                {
                    "id": "2",
                    "value": "刘宇",
                    "manage": false,
                    "img": "img/head-list.png"
                },
                {
                    "id": "3",
                    "value": "王佳印",
                    "manage": false,
                    "img": "img/head-list.png"
                },
                {
                    "id": "4",
                    "value": "刘晓辉",
                    "manage": false,
                    "img": "img/head-list.png"
                },
                {
                    "id": "5",
                    "value": "艾云鹤1",
                    "manage": false,
                    "img": "img/head-list.png"
                },
                {
                    "id": "6",
                    "value": "刘宇1",
                    "manage": false,
                    "img": "img/head-list.png"
                }
            ];

            _self.$data.staffs = data;

            if (this.$props.disabled == 'disabled') {
                this.$data.idDisabled = true;
            }
            //
        },
        directives: {
            selectstaff:
                {
                    inserted: function (el) {
                        staffSelect(el);
                    },
                    update: function (el) {
                        staffSelect(el);
                    },
                    componentUpdated: function (el) {
                        console.log(el);
                        staffSelect(el);
                    }
                }
        }
    });
    Vue.component('staffSelect', staffSelect);
</script>